(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,i=[].slice;define(["load","modernizr","backbone","underscore","jquery","lib/hover_dropdown","lib/dropdown","lib/media","lib/partials","lib/transitional_autocomplete","lib/flash","google/analytics","mixpanel","jquery.scrollTo","segment/analytics"],function(n,r,o,a,s,l,u,c,d,h,p,f,g){var m,v,y;return v=function(t){return t>99?"99+":t},y=function(t,e,n){var i;if(n>0)return i=v(n),t(".notification_counter."+e).text(i).show(),t("."+e+"_image").addClass("active")},m=function(n){function i(){return this.unload=t(this.unload,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(t){return this.$navbar=t.$navbar,this.$original=this.$el.children(),this.$spinner=s("<img>").attr("src","/images/shared/loading.gif"),this.tokens=[],this.$navbar.on("click focus",this.unload),this.$navbar.css("min-height",this.$navbar.css("height")),this.blinkTimeout=setTimeout(function(t){return function(){return g.track("a-bar: blinked"),t.$el.effect("pulsate",{times:2},1e3)}}(this),1e4),this.fadeTimeout=setTimeout(function(t){return function(){return g.track("a-bar: timeout"),t.reset(!1)}}(this),2e4),g.track("a-bar: load"),this.next()},i.prototype.events={"click a.a_bar":"submit"},i.prototype.clearTimeouts=function(){return clearTimeout(this.blinkTimeout),clearTimeout(this.fadeTimeout)},i.prototype.unload=function(){return 0===this.tokens.length?this.unloaded=!0:void 0},i.prototype.render=function(t){return g.track("a-bar: show"),this.$el.children().wrapAll('<div class="wrap" />'),this.$el.find(".wrap").fadeOut(200,function(e){return function(){return e.$el.children().detach(),t.hide().appendTo(e.$el).fadeIn(200)}}(this))},i.prototype.submit=function(t){return this.clearTimeouts(),this.$el.find(".notification .inner").fadeOut(200,function(e){return function(){return e.$el.find(".notification").html(e.$spinner.hide()),e.$spinner.fadeIn(200,function(){var n;if(g.track("a-bar: click"),n={url:s(t.target).attr("href"),type:"POST"},s(t.target).hasClass("delete"))n.data={_method:"delete"},g.track("a-bar: click delete");else{if(s(t.target).hasClass("dismiss"))return s.cookie("a-bar-dismiss",1,{expires:5,path:"/"}),g.track("a-bar: dismiss"),s.ajax(n),e.clearTimeouts(),e.reset(!1),!1;g.track("a-bar: click confirm")}return s.ajax(n),e.next()}).css("display","inline-block")}}(this)),!1},i.prototype.reset=function(t){return null==t&&(t=!0),t&&this.$el.find(".notification").html("<span>Thank you!</span>"),setTimeout(function(t){return function(){return t.$el.children().fadeOut(500,function(){return t.$el.html(t.$original),t.$original.hide().fadeIn()})}}(this),t?2e3:5)},i.prototype.next=function(){return s.ajax(this.$el.data("confirmation_url"),{data:{seen:this.tokens.join(" ")},success:function(t){return function(e){return t.unloaded||!s(e).filter("div").data("token")?(g.track("a-bar: unload"),t.clearTimeouts()):(t.tokens.push(s(e).filter("div").data("token")),t.render(s(e).filter("*")))}}(this),error:function(t){return function(){return t.tokens.length>0?(g.track("a-bar: complete"),t.reset()):(g.track("a-bar: empty"),t.clearTimeouts())}}(this)})},i}(o.View),{processing:function(i){var a,l;return a=function(o){function a(){return this.recomputeDimensions=t(this.recomputeDimensions,this),this._$detailsContent=t(this._$detailsContent,this),this._detailsJsp=t(this._detailsJsp,this),this._listJsp=t(this._listJsp,this),this.toggleControls=t(this.toggleControls,this),this.hideControls=t(this.hideControls,this),this.showControls=t(this.showControls,this),this.hideDetails=t(this.hideDetails,this),this.showDetails=t(this.showDetails,this),this.scrollDetailsTo=t(this.scrollDetailsTo,this),this.scrollListTo=t(this.scrollListTo,this),this.scrollListToTop=t(this.scrollListToTop,this),this.detailsSizeChanged=t(this.detailsSizeChanged,this),this.changeDetails=t(this.changeDetails,this),this.canToggleControls=t(this.canToggleControls,this),this.canToggleDetails=t(this.canToggleDetails,this),a.__super__.constructor.apply(this,arguments)}return e(a,o),a.prototype.initialize=function(t){var e;return this.recomputeDimensions(),s(window).on("resize",this.recomputeDimensions),e=function(t){return function(){var e,n,i;return i=null!=t._listJsp()?t._listJsp().getContentPositionY():t.$("> .container > .list > .content").scrollTop(),0>=i&&(i=-parseInt(t.$("> .container > .list").css("margin-top"))),0>=i&&(i=Math.max(s(window).scrollTop()-t.$("> .container").offset().top,0)),t.canToggleDetails()?(null!=(e=t._detailsJsp())&&e.destroy(),null!=(n=t._listJsp())&&n.destroy(),t.hideDetails(),t.hideControls(),t.recomputeDimensions(),s(window).scrollTo(t.$("> .container").offset().top+i)):(t.hideDetails(),t.hideControls(),t._$detailsContent().show())}}(this),e(),c.on("change",e),this.$("> .container > .list").removeClass("loading"),null==t.swipesActive&&(t.swipesActive=!0),r.touch&&n(["jquery.event.swipe"],function(t){return function(){return t.$("> .container > .details > .content").on("movestart",function(t){return t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY?t.preventDefault():void 0}).on("swiperight",function(){return t.hideDetails()})}}(this)),this.recomputeDimensions()},a.prototype.canToggleDetails=function(){return c.isHandheld()},a.prototype.canToggleControls=function(){return!c.isDesktop()&&this.$el.hasClass("with_controls")},a.prototype.changeDetails=function(t){var e,n,i;return this.$("> .container > .details").removeClass("with_error"),null!=(i=this._lastChangeDetails)&&i.reject(),e=s.Deferred(),this._lastChangeDetails=e,s.when(t).always(function(){return function(){return e.resolve()}}(this)),n=s.Deferred(),this._$detailsContent().fadeOut("fast",function(t){return function(){return t.$("> .container > .details ").addClass("loading"),n.resolve()}}(this)),this.showDetails(),s.when(n,e).done(function(e){return function(){return s.when(t).done(function(t){var n;return e.$("> .container > .details").removeClass("loading"),e._$detailsContent().html(t),e._$detailsContent().fadeIn("fast"),null!=(n=e._detailsJsp())?n.reinitialise():void 0}).fail(function(){return e.$("> .container > .details").removeClass("loading").addClass("with_error")}).always(e.deatilsSizeChanged)}}(this))},a.prototype.detailsSizeChanged=function(){var t;return null!=(t=this._detailsJsp())?t.reinitialise():void 0},a.prototype.scrollListToTop=function(){return null!=this._listJsp()?this._listJsp().scrollToY(0,!0):this.canToggleDetails()?s(window).scrollTo(this.$("> .container > .list")):this.$("> .container > .list > .content").scrollTo(0)},a.prototype.scrollListTo=function(t){return null!=this._listJsp()?this._listJsp().scrollToElement(t,!0,!0):this.canToggleDetails()?s(window).scrollTo(t):this.$("> .container > .list > .content").scrollTo(t)},a.prototype.scrollDetailsTo=function(t){return null!=this._detailsJsp()?this._detailsJsp().scrollToElement(t,!0,!0):this.canToggleDetails()?s(window).scrollTo(t):this.$("> .container > .details > .content").scrollTo(t)},a.prototype.showDetails=function(){var t,e;return this.canToggleDetails()?(this._$detailsContent().show(),e=s(window).scrollTop(),t=this.$("> .container").offset().top-e,0>t&&(this.$("> .container > .list").css("margin-top",t+"px"),s(window).scrollTo(this.$("> .container"))),this.$("> .container > .list").css("max-height",s(window).height()-Math.min(t,0)),this.$el.removeClass("show_controls").addClass("show_details")):void 0},a.prototype.hideDetails=function(){var t;return t=parseInt(this.$("> .container > .list").css("margin-top")),this.$("> .container > .list").css("margin-top",0),this.$("> .container > .list").css("max-height","none"),this.canToggleDetails()&&(this.trigger("hide_details"),this._$detailsContent().fadeOut("fast"),this.$el.removeClass("show_controls").removeClass("show_details"),0>t)?s(window).scrollTo(this.$("> .container").offset().top-t):void 0},a.prototype.showControls=function(){return this.canToggleControls()?(this.canToggleDetails()&&this.$("> .container > .list, > .container > .details").css("max-height",s(window).height()-this.$("> .container").offset().top+"px"),this.$el.removeClass("show_details").addClass("show_controls")):void 0},a.prototype.hideControls=function(){return this.$("> .container > .list, > .container > .details ").css("max-height","none"),this.canToggleControls()?this.$el.removeClass("show_controls").removeClass("show_current"):void 0},a.prototype.toggleControls=function(){return this.$el.hasClass("show_controls")?this.hideControls():this.showControls()},a.prototype._listJsp=function(){return this.$("> .container > .list > .content").data("jsp")},a.prototype._detailsJsp=function(){return this.$("> .container > .details > .content").data("jsp")},a.prototype._$detailsContent=function(){return(null!=this._detailsJsp()?this._detailsJsp().getContentPane():this.$("> .container > .details > .content")).children(".wrapper")},a.prototype.recomputeDimensions=function(){var t,e,n;return this.canToggleDetails()?this.$("> .container > .list > .content, > .container > .details > .content").height("auto"):(t=s("body").height()-this.$("> .container").offset().top-s("#footer").height(),t=Math.max(t,this.$("> .container > .controls").outerHeight()),this.$("> .container > .list > .content, > .container > .details > .content").each(function(){return i(this).height(t+i(this).innerHeight()-i(this).outerHeight())})),null!=(e=this._listJsp())&&e.reinitialise(),null!=(n=this._detailsJsp())?n.reinitialise():void 0},a}(o.View),l=new a({el:this}),i("> .container > .details > .error.default").on("click .back",function(){return function(){return l.hideDetails()}}(this)),l},off_canvas_controls:function(n){var i,r;return i=function(n){function i(){return this.toggleControls=t(this.toggleControls,this),this.hideControls=t(this.hideControls,this),this.showControls=t(this.showControls,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){var t;return t=function(t){return function(){var e;return e=t.$("> .container > .controls"),e.hasClass("fixed")?e.removeClass("fixed").css("width","").width(e.width()).addClass("fixed"):e.css("width","")}}(this),s(window).on("resize",t)},i.prototype.canToggleControls=function(){return c.isHandheld()},i.prototype.showControls=function(){return this.canToggleControls()?this.$el.removeClass("controls_hidden").addClass("controls_visible"):void 0},i.prototype.hideControls=function(){return this.canToggleControls()?this.$el.removeClass("controls_visible").addClass("controls_hidden"):void 0},i.prototype.toggleControls=function(){return this.$el.hasClass("controls_visible")?this.hideControls():this.showControls()},i}(o.View),r=new i({el:this}),n("> .glass_container > .glass").on("click",function(){return function(){return r.hideControls()}}(this)),r},off_canvas_controls_toggle:function(t,e){var n;if(n=s(d.selector("layouts/off_canvas_controls")),1!==n.length)throw new Error("Cannot understand DOM");return e.on("click",function(){return d["with"](n,function(t){return t.toggleControls()})})},profile:function(){var t;return new(t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.toggleSidebar=function(t){return t?this.$el.removeClass("hide_sidebar").addClass("show_sidebar"):this.$el.removeClass("show_sidebar").addClass("hide_sidebar")},n.prototype.replaceMain=function(t){var e;return this._replaceMainDeferred=s.Deferred(),e=this._replaceMainDeferred,s.when(t).done(function(t){return function(){var n;return n=1<=arguments.length?i.call(arguments,0):[],e===t._replaceMainDeferred?e.resolveWith(t,n):void 0}}(this)).fail(function(t){return function(){var n;return n=1<=arguments.length?i.call(arguments,0):[],e===t._replaceMainDeferred?e.rejectWith(t,n):void 0}}(this)),this.$("> .content > .panes_container > .panes_grid > .main").addClass("loading"),s.when(e).always(function(t){return function(){return t.$("> .content > .panes_container > .panes_grid > .main").removeClass("loading")}}(this)).done(function(t){return function(e){return t.$("> .content > .panes_container").removeClass("error").addClass("no_error"),t.$("> .content > .panes_container > .panes_grid > .main").empty().append(e)}}(this)).fail(function(t){return function(){return t.$("> .content > .panes_container").addClass("error").removeClass("no_error")}}(this))},n.prototype.replaceSidebar=function(t){return this.$("> .content > .panes_container > .panes_grid > .sidebar").empty().append(t)},n}(o.View))({el:this})},tabbed_layout:function(t,e){return function(){var t,n,i,r,o,a,l;return t=e.children(".content").children(".content_well").children(".content_well_header"),0!==t.length?(r=null,i=e.children(".content").children(".left_bar").children(".convertible_nav"),l=t.find(".more"),0===l.length&&i.length>0&&(a=t.find(".title"),a.length>0&&(l=s('<div class="more">&#9662;</div>'),l=l.insertAfter(a))),n=null,i.length>0&&l.length>0?(o=function(){return function(){return null!=r&&r.unbind(),null!=n&&n.remove(),c.isHandheld()?(n=s('<div class="dropdown"></div>').appendTo(t),i.clone(!0).appendTo(n),r=new u(l,n),r.bind()):void 0}}(this),c.on("change",o),o()):void 0):void 0}()},nav:function(t,e){return t(".searchInput").on("focus",function(){return t(this).closest("form").addClass("focus")}).on("blur",function(){return t(this).closest("form").removeClass("focus")}),new h.SearchAutocomplete({el:t(".searchInput")}),t(".searchInput").autocomplete("option","position",{my:"left top",at:"left bottom",of:t(".searchForm")}),t(".mobileSearchLink").on("click",function(){return t(".mobileSearchContainer").toggle()}),c.on("change",function(){return t(".mobileSearchContainer").hide()}),new h.SearchAutocomplete({el:t(".mobileSearchInput")}),s(document).on("keydown",function(e){return 191===e.which&&(s(":focus").is(":input")||s(":focus").prop("contenteditable")||(t(".searchInput").focus(),s(document).trigger("close.facybox"),e.preventDefault())),!0}),setTimeout(function(){return s.get("/home/counts",function(e){return e.notifications>0&&t(".notificationsCounter").show().text(e.notifications),e.messages>0?t(".messageCounter").show().text(e.messages):void 0})},100),t(".network-dropdown-menu")&&new l(t(".network-dropdown-button"),t(".network-dropdown-menu")),t(".more-dropdown-menu")&&new l(t(".more-dropdown-button"),t(".more-dropdown-menu")),t(".navLinks").length>0&&(new u(t(".userPhoto"),t(".navLinks"),{left:!1,adjust_left:0}).bind(),n(["models/user","models/repository"],function(e,n){var i,r,o,a;if(r=n.get(e),a=t(".navLinks").data("user_id"),null==a)throw new Error("User ID not given");return o=r.bootstrap(a),i=function(){return o.has("slug_url")&&t("a.profile").attr("href",o.get("slug_url")),o.has("avatar")?t(".userPhoto img").attr("src",o.get("avatar")):void 0},i(),o.on("change",i)})),c.isDesktop()&&t("> .primaryContainer").data("confirmation_url")&&!s.cookie("a-bar-dismiss")?new m({el:t("> .primaryContainer"),$navbar:e}):void 0},env_top_panel:function(t,e){var n,i,r,o,a,l;for(l=function(){var e,n;return e=t(".expand").is(":visible"),n=t(".expand").css("width","auto").show().width(),t(".expand").toggle(e),t(".expand").css("width",n+1)},l(),s(window).on("resize",l),t(".set_temp_login").click(function(t){return s(t.target).closest("form").ajaxSubmit({success:function(){return function(){var e;return e=s(t.target).closest(".row"),e.find(".not_temporary").hide(),e.find(".temporary").show()}}(this)})}),t(".environment").click(function(){return t(this).css("margin-right","-1px"),t(".expand").toggle({animation:"fold",horizFirst:!0,size:1},function(e){return function(){return t(e).css("margin-right","0")}}(this)),e.toggleClass("expanded"),t("#sign_in_as_field").focus(),!1}),o=["graph-menu","social-menu","transactions-menu","talent-menu","email-menu","more-menu","devops-menu"],a=[],n=0,i=o.length;i>n;n++)r=o[n],a.push(new u(t("."+r),t("."+r+" .submenu"),{left:!0,adjust_top:-37,adjust_left:-147}).bind());return a},dickbar:function(t,n){var i;return new(i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){return this.$el.hasClass("uk_accreditation")&&null!=g&&g.track("dbar - uk_accreditation show"),this.$el.hasClass("angel_profile_cta")&&(null!=g&&g.track("dbar - /apply CTA",{stub_profile:this.$(".inner").data("stub_profile")}),null!=g&&g.track_links(".track_link","dbar - click /apply CTA")),this.$el.hasClass("yearbook")&&null!=g&&g.track_links(".track_link","dbar:yearbook"),this.$el.hasClass("uk_promo")&&null!=g?g.track_links(".track_link","dbar:uk_promo"):void 0},i.prototype.hide=function(){return this.$el.slideUp(200)},i.prototype.events=function(){return{"click .js-acceleratorHide":function(e){return t(e.currentTarget).closest("form").ajaxSubmit(),this.$el.hide()},"click .dbar_hide":function(t){var e;return t.stopPropagation(),null!=g&&g.track("dbar - hide"),this.hide(),e=this.$el.hasClass("kano")?"/people/hide_kano":this.$el.hasClass("angel_profile_cta")?"/people/hide_latent_investor_dbar":this.$el.hasClass("uk_promo")?"/people/hide_uk_promo":this.$el.hasClass("backup-email")?"/people/hide_backup_email_dbar":this.$el.hasClass("js-maintenance")?"/people/hide_maintenance":"/people/hide_dbar",s.ajax({url:e,type:"post"})},"click .js-acknowledge-terms":function(){return this.$(".js-acknowledge-terms").addClass("c-button--loading"),s.ajax({url:"/people/acknowledge_terms",type:"post",success:this.hide()})}}},i}(o.View))({el:n})},flashes:function(t,e){var n;return t("> .js-popover").length>0?(n=t("> .js-popover"),n.find('[data-modal="true"]').length>0&&(s.facybox.settings.modal=!0),s.facybox.loading(),s.facybox.reveal(n),n.find(".focus").focus()):t("> .js-popover-url").length>0?s.facybox({ajax:t("> .js-popover-url").data("url")}):t("> .js-container").children().length>0&&t("> .js-container").slideDown("fast"),{flash:function(n,i){return null==i&&(i=null),e.removeClass("error").addClass("normal"),t(".flash").remove(),p=s('<div class="notice" />').html(n),t("> .js-container").append(p),t("> .js-container").show(),p.addClass(e.data("flash_class")).hide(),p.slideDown(),null!=i?a.delay(function(){return p.slideUp("fast",function(){return p.remove()})},i):void 0}}},footer_logged_out:function(){return null!=g&&g.track_links(".bf-item.trending","footer - trending"),null!=g&&g.track_links(".bf-item.syndicates","footer - syndicates"),null!=g&&g.track_links(".bf-item.funds","footer - funds"),null!=g&&g.track_links(".bf-item.recruiting","footer - recruiting"),null!=g&&g.track_links(".bf-item.jobs","footer - jobs"),null!=g?g.track_links(".bf-item.raise","footer - raise"):void 0},footer_links:function(t){return null!=g&&g.track_links(".al-jobs","footer - angellist jobs"),t(".view_photo_attribution").click(function(){return s.facybox({ajax:"/home/photo_attribution"})})}}})}).call(this);