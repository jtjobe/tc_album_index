(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;define(["load","jquery","underscore","lib/dropdown","lib/flash","lib/form","lib/environment","lib/apply_button","models/repository","models/follow","modernizr","mixpanel","google/analytics","lib/profile_tips","global/tiptip","lib/partials","qtip","jquery.autosize","jquery.livestamp","jquery.magnific"],function(e,n,i,r,o,a,s,l,u,c,d,h,p,f,g,m){var v;return v={defaultPosition:"top",show:{effect:!1,delay:0},hide:{effect:!1}},{comments:function(t){return t(".view_hidden_link a").click(function(){var e;return t(".hidden_comments").show(),e=n(this).parent().find(".private"),e.length>0?(n(this).hide(),e.find(".middot").hide()):n(this).parent().parent().hide()}),t(".view_all_link a").click(function(){return n(this).parent().parent().hide(),t(".collapsed_comments").show()})},comment_box:function(t){return t(".comment_box").first().hover(function(){return t(".show_on_hover").show()},function(){return t(".show_on_hover").hide()}),t(".unhide_comment_link").click(function(){var e;return e=n(this).data("id"),n(this).parent(".unhide").hide(),n.ajax({url:"/comments/unhide",type:"post",data:{id:e},success:function(e){var n,i;return e.html?(n=t(".comment_box").first().parents(".shared.comments"),i=n.find(".shared.comment_form textarea").val(),n.html(e.html),n.find(".shared.comment_form textarea").val(i)):void 0}})}),t(".delete_comment_link").click(function(){var e,i;return i=n(this).data("id"),e=t(".comment_box").first(),n(this).parent(".delete").hide(),n.ajax({url:"/comments/"+i+".js",type:"post",data:{_method:"delete"},success:function(i,r){var o,a;return"success"===r?(e.remove(),o=t(".comments span.count"),a=parseInt(n(o[0]).text()),o.each(function(){return n(this).text(a(-1))}),n(document).trigger("comment.destroy")):void 0}})})},comment_form:function(t){return t(".new_box").ready(function(){var e,i,r,o,a;return e=t(".new_box"),a=e.data("user_id"),i=e.data("comment_data_id"),r=e.data("comment_holder_id"),o=e.data("is_admin"),new MentionsAutocomplete(a,i,r,o),setTimeout(function(){return t("textarea").focus(function(){var e;return n(this).removeClass("placeholder"),n(this).parents("form").addClass("after_click"),e=t(".new_box"),e.find(".follow-pic.not_anonymous.hidden").fadeIn(),e.find(".action_line").fadeIn(),e.find(".visibility_info").fadeIn()})},50)}),t(".new_box form").submit(function(){var e,i;return e=t(".new_box"),e.find("input[type='submit']").attr("disabled",null),i=e.data("comment_data_id"),""!==e.find("textarea").val()&&(n(this).find("input[type='submit']").hide(),n.ajax({url:"/comments.js",type:"post",data:e.find("form input, form textarea[data-id='"+i+"_form']").serialize(),success:function(i){var r,o,a;return t(".new_box_marker").before(n(i.html)),r=t(".comments span.count"),o=parseInt(n(r[0]).text()),r.each(function(){return n(this).text(o+1)}),n(document).trigger("comment.create"),e.find("textarea").val("").css("height","").addClass("placeholder"),e.find(".follow-pic.hidden, .action_line, .visibility_info").hide(),e.find("form").removeClass("after_click"),e.find("input[type='submit']").show(),a=e.find(".mentions_input_holder").attr("data-id"),a?n("[data-id='"+a.replace("mentions_","")+"']").focusout():void 0},error:function(){return t(".comment_notifications").html("Sorry, there was an error. Please try again later.").slideDown("fast",function(){return setTimeout(function(){return t(".comment_notifications").slideUp("fast")},5e3)})}})),!1})},comments_compact:function(t,e){return t("textarea").autosize().focus(function(){return t(".submit").show()}),e.on("click",".reply",function(){var e;return e=n(this).parents(".comment").data("author_slug"),t("textarea").focus(),t("textarea").val().length>0||t("textarea").val("@"+e),!1})},more_pagination:function(t,e){var n,i,r,o,a,s,l;return s=e.data("startup_id"),o=e.data("page"),a=e.data("per_page"),l=e.data("url"),i=e.data("object_id"),r=e.data("options"),n=e.data("loading_method"),e.remove(),setTimeout(function(){return new Pagination({startup_id:s,page:o,per_page:a,url:l,object_id:i,options:r,loading_method:n})},50)},tutorial_tooltip:function(t){var e,i,r,o;return i=t(".js-tutorial-tooltip-marker"),r=t(".js-tutorial-tooltip-marker-wrapper"),e=t(".js-tutorial-tooltip-close"),o=t(".js-tutorial-tooltip-wrapper"),i.hover(function(){return n(this).removeClass("animate-opacity-pulse")},function(){return n(this).addClass("animate-opacity-pulse")}),i.click(function(){return r.fadeOut("fast",function(){return r.remove()}),n(".js-tutorial-tooltip-wrapper").hide(),n(".js-tutorial-tooltip-marker").addClass("animate-opacity-pulse"),o.show()}),e.click(function(){var t;return t=n(this).closest(".tutorial_tooltip").data("title"),n.post("/property",{name:"tooltip-seen-"+t,value:!0}),n(".js-tutorial-tooltip-marker-wrapper").fadeIn("fast"),o.fadeOut("fast",function(){return o.remove()})})},apply_button:function(t,e){return l.setup_apply_button(t,e),t(".apply_link").click(function(){return h.track("IO activation: clicked "+t(".apply_link").text())})},upload_button:function(t){return t(".g-button").click(function(){return t(".g-button").fadeOut(function(){return t(".file_input").fadeIn()})})},expandable_text:function(t){return t(".js-read-more").click(function(e){return e.preventDefault(),t(".js-read-more").hide(),t(".js-truncated-text").hide(),t(".js-expanded-text").show()})},startup_follow_button:function(t,e){var a,s,l,p,f,g,m,v,y,_;return _=function(){return r.hideAll(),t(".dropdown").fadeIn(100)},m=function(){return t(".dropdown").hide()},y=function(){var t;return t=e.data("startup_id"),n.ajax({url:"/follows/startup_follow_button",data:{startup_id:t},dataType:"json",success:function(t){return e.replaceWith(t.html)}})},t(".dropdown").css("top",t(".main_button").outerHeight()+7+"px"),v=function(){return d.touch},s=function(){return v()?void 0:e.hover(function(){return setTimeout(function(){return _()},100)},function(){return m()})},r.on("hide",m),t(".main_button").hasClass("following")&&s(),f=function(){return o("An error occured while saving the data, please try to reload the page.")},g=u.get(c),a={follower_id:e.data("user_id"),followed_type:"Startup",followed_id:e.data("startup_id")},e.data("follow_token")&&g.bootstrap(i.extend({token:e.data("follow_token")},a)),l=function(){var i;return t(".main_button").hasClass("disabled")?void 0:(t(".main_button").hide(),t(".loader").show(),t(".unfollow_link").addClass("disabled"),m(),h.track("user: followed a startup"),i=g.findWhere(a)||new c(a),g.add(i),n.ajax({url:"/follows.js",data:{followed_token:e.data("token"),followed_type:"Startup"},type:"post",dataType:"json",success:function(n){return n.success?(i.set("token",n.follow_token),t(".unfollow_link").removeClass("disabled"),e.data("follow_token",n.follow_token)):(g.remove(i),f())},error:function(){return g.remove(i),f()}}),setTimeout(function(){return t(".main_button").show(),t(".loader").hide(),t(".main_button").addClass("following"),t(".main_button").text("Following"),s(),_()},400))},p=function(){return t(".unfollow_link").hasClass("disabled")?void 0:(t(".main_button").removeClass("following"),t(".main_button").text("Follow"),e.unbind(),m(),t(".main_button").addClass("disabled"),n.ajax({url:"/follows/"+e.data("follow_token")+".js",data:{_method:"delete"},type:"post",dataType:"json",success:function(e){return e.success?(g.remove(g.findWhere(a)),t(".main_button").removeClass("disabled")):f()},error:function(){return f()}}))},t(".main_button").click(function(){return t(".main_button").hasClass("following")?v()&&t(".dropdown").is(":visible")?m():_():l()}),t(".unfollow_link").click(function(){return p()}),{reload:y}},follow_user_button:function(n,r){return e(["lib/follows","models/follow"],function(){return function(e,a){var s,l,c,d;return c=function(){return o("An error occured while saving the data, please try to reload the page.")},l={followed_type:"User",followed_token:r.data("token"),follower_id:r.data("follower_id")},r.data("follow_token")&&u.get(a).bootstrap(i.extend({token:r.data("follow_token")},l)),d=r.data("extra_params")||{},new(s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.renderCreated=function(){return this.$el.addClass("following").addClass("inverse").removeClass("not_following").text("Following")},n.prototype.renderDestroyed=function(){return this.$el.addClass("not_following").removeClass("inverse").removeClass("following").text("Follow")},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this,"request",function(t){return function(e,n){return t.$el.addClass("disabled"),n.always(function(){return t.$el.removeClass("disabled")}),n.done(function(t){return t.success?void 0:c()}),n.error(c)}}(this))},n.prototype._destroyModel=function(t){return t.destroy({parameters:d})},n.prototype._saveModel=function(t){return t.save(null,{parameters:d})},n}(e.FollowToggleView))({el:n(".main_button"),attributes:l})}}(this))},email_preview:function(t){return t("a.cancel").click(function(){return n.facybox.close()}),t(".actions a").attr("href","javascript:(void);"),t("a").each(function(){var t;return t=n(this).attr("href"),n(this).attr("href",t.split("?")[0]),n(this).attr("target","_blank")})},render_likes:function(t,e){return t(".tiptip").qtip({show:{delay:0},defaultPosition:"top"}),t(".toggle_like").each(function(){var i;return i=t(this).data("likes"),t(this).one("click",function(){return e.text("..."),n.post(e.data("url"),{type:e.data("likable_type"),id:e.data("likable_id"),action_type:i?"destroy":"create",display:e.data("display")},function(){return function(t){return e.replaceWith(t.html)}}(this),"json")})})},updating_timestamp:function(t,e){return e.livestamp(e.data("timestamp"))},startup_autocomplete:function(e,i){var r;return new(r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return require(["lib/transitional_autocomplete"],function(t){return function(e){var n;return n=new e.TypedAutocomplete({types:["Startup"],canSelectUnmatchedQuery:!1,el:t.$(".startup_name")}),n.on("select",function(e){return t.$(".startup_id").val(e.id),t.$(".startup_name").val(e.name),t.setIcon(e.pic)})}}(this))},i.prototype.setError=function(t){return a.setInputError(this.$(".startup_name"),t)},i.prototype.clearError=function(){return a.clearInputError(this.$(".startup_name"))},i.prototype.clearSelection=function(){return this.$(".startup_name").val(""),this.$(".startup_id").val(""),this.showDefaultIcon()},i.prototype.hasSelection=function(){var t;return t=this.$(".startup_id").val(),(null!=t?t.length:void 0)>0},i.prototype.hideDefaultIcon=function(){return this.$("i.prefix").hide()},i.prototype.showDefaultIcon=function(){return this.$("i.prefix").show(),this.$(".startup_name").css("background-image","")},i.prototype.setIcon=function(t){return this.$(".startup_name").css("background-image","url("+t+")"),this.hideDefaultIcon()},i.prototype.events=function(){return{"change .startup_name":function(t){return""===n(t.target).val()?this.clearSelection():void 0}}},i}(Backbone.View))({el:i})},profile_tips:function(t,e){return g.init(),t("a").click(function(){return function(t){var n;return t.preventDefault(),n=e.data("profile_owner"),f.handle_click(t,n)}}(this))},talent_save_filter_cta:function(t){return t("a.c-button--blue").click(function(){return n(this).hasClass("c-button--gray")?!1:(n(this).removeClass("c-button--blue"),n(this).addClass("c-button--gray"),n(this).html("Done!"),m["with"](n(m.selector("job_profiles/browse_filters")),function(t){return t.saveFilter(),h.track("talent: startup saved filter from cta")}),m["with"](n(m.selector("job_listings/browse_filters")),function(t){return t.saveFilter(),h.track("talent: candidate saved filter from cta")}),!1)})},talent_search_rating:function(e,i){var r;return new(r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"mouseenter .fontello-star":"_onEnterStar","mouseleave .fontello-star":"_onLeaveStar","click .fontello-star":"_onClickStar","click .js-send":"_onSendReview"},i.prototype.initialize=function(){return this.rating=0,this.disableRatings=!1},i.prototype._onEnterStar=function(t){var e;if(!this.disableRatings)return e=n(t.target),e.removeClass("u-colorGray8").addClass("u-colorGray1"),e.prevAll().removeClass("u-colorGray8").addClass("u-colorGray1"),e.nextAll().removeClass("u-colorGray1").addClass("u-colorGray8"),this.rating=1+e.prevAll().length},i.prototype._onLeaveStar=function(){return this.disableRatings?void 0:(this.$(".fontello-star").removeClass("u-colorGray1").addClass("u-colorGray8"),this.rating=0)},i.prototype._onClickStar=function(){return this.disableRatings=!0,a=this.$(".js-form"),a.find("#search_result_rating_rating").val(this.rating),a.ajaxSubmit({dataType:"json",success:function(t){return function(e){return t.rating_id=e.id,t.$(".js-ratings-form").hide(),t.$(".js-review-form").show()}}(this)})},i.prototype._onSendReview=function(t){return this.$(".js-review-text").val().length?(n(t.target).addClass("c-button--loading"),n.ajax({url:"/search_result_ratings/"+this.rating_id,type:"PUT",dataType:"json",data:{"search_result_rating[details]":this.$(".js-review-text").val()},success:function(t){return function(){return t.$el.remove()}}(this)})):!1},i}(Backbone.View))({el:i})}}})}).call(this);