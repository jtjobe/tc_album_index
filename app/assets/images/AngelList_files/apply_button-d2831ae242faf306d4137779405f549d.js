(function(){define(["require","jquery","lib/autocomplete","backbone","underscore"],function(t,e,n,i,r){var o,a,s;return a=0,o="",s={submit_application:function(t,n){return a=n,o=t,e.facybox.close(),s.trigger("apply_started"),e.ajax({url:o,data:{startup_id:n},success:function(t){return t.trigger_event?e(t.trigger_on).trigger(t.trigger_event):(t.error_form&&e.facybox(t.error_form),t.startup_id=n,s.trigger("apply_finished",t))}})},resubmit_application:function(){return a>0?s.submit_application(o,a):void 0},setup_apply_button:function(t,n){var i,r,a;return o=t(".apply").data("ajax_url"),i=n.data("custom_notice_elt_selector"),a=function(){return t(".dropdown").hide(),t(".g-button.apply_link").css("visibility","hidden"),t(".g-button.loading-button").show()},r=function(){return t(".g-button.loading-button").hide(),t(".g-button.apply_link").css("visibility","visible")},s.on("apply_started",a),s.on("apply_finished",function(n){return r(),n.has_errors?void 0:(t(".dropdown .startup[data-id="+n.startup_id+"]").remove(),i?(e(i).html(n.message),e(i).slideDown(200)):(t(".apply_notice .message_text").html(n.message),e.facybox.loading(),e.facybox.reveal(t(".apply_notice.modal"))))}),t(".apply_link").click(function(t){return t.stopPropagation(),n.find(".dropdown").show()}),t(".dropdown .startup").click(function(t){var n;return e(this).data("create")?(window.location.href="/startups/new"+e(this).data("params"),a()):o&&e(this).data("id")?(n=e(this).data("id"),s.submit_application(o,n)):e(this).hasClass("unselectable")?t.stopImmediatePropagation():void 0}),e("body").click(function(){return n.find(".dropdown").hide()})}},r.extend(s,i.Events)})}).call(this);