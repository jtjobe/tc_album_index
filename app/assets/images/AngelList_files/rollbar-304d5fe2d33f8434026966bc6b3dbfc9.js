!function(window,document){function _isUndefined(t){return"undefined"==typeof t}function computeStackTraceWrapper(t){function e(t){if(!b)return"";try{var e=function(){try{return new window.XMLHttpRequest}catch(t){return new window.ActiveXObject("Microsoft.XMLHTTP")}},n=e();return n.open("GET",t,!1),n.send(""),n.responseText}catch(i){return""}}function n(t){if(!y.hasOwnProperty(t)){var n="";-1!==t.indexOf(document.domain)&&(n=e(t)),y[t]=n?n.split("\n"):[]}return y[t]}function i(t,e){var i,r=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",s=10,l=n(t);if(!l.length)return UNKNOWN_FUNCTION;for(var c=0;s>c;++c)if(a=l[e-c]+a,!_isUndefined(a)){if(i=o.exec(a))return i[1];if(i=r.exec(a))return i[1]}return UNKNOWN_FUNCTION}function r(t,e){var i=n(t);if(!i.length)return null;var r=[],o=Math.floor(_/2),a=o+_%2,s=Math.max(0,e-o-1),l=Math.min(i.length,e+a-1);e-=1;for(var c=s;l>c;++c)_isUndefined(i[c])||r.push(i[c]);return r.length>0?r:null}function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function a(t){return o(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function s(t,e){for(var i,r,o=0,a=e.length;a>o;++o)if((i=n(e[o])).length&&(i=i.join("\n"),r=t.exec(i)))return{url:e[o],line:i.substring(0,r.index).split("\n").length,column:r.index-i.lastIndexOf("\n",r.index)-1};return null}function l(t,e,i){var r,a=n(e),s=new RegExp("\\b"+o(t)+"\\b");return i-=1,a&&a.length>i&&(r=s.exec(a[i]))?r.index:null}function c(t){for(var e,n,i,r,l=[window.location.href],c=document.getElementsByTagName("script"),u=""+t,d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,h=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<c.length;++p){var f=c[p];f.src&&l.push(f.src)}if(i=d.exec(u)){var g=i[1]?"\\s+"+i[1]:"",m=i[2].split(",").join("\\s*,\\s*");e=o(i[3]).replace(/;$/,";?"),n=new RegExp("function"+g+"\\s*\\(\\s*"+m+"\\s*\\)\\s*{\\s*"+e+"\\s*}")}else n=new RegExp(o(u).replace(/\s+/g,"\\s+"));if(r=s(n,l))return r;if(i=h.exec(u)){var v=i[1];if(e=a(i[2]),n=new RegExp("on"+v+"=[\\'\"]\\s*"+e+"\\s*[\\'\"]","i"),r=s(n,l[0]))return r;if(n=new RegExp(e),r=s(n,l))return r}return null}function u(t){if(!t.stack)return null;for(var e,n,o=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,s=t.stack.split("\n"),c=[],u=/^(.*) is undefined$/.exec(t.message),d=0,h=s.length;h>d;++d){if(e=a.exec(s[d]))n={url:e[3],func:e[1]||UNKNOWN_FUNCTION,args:e[2]?e[2].split(","):"",line:+e[4],column:e[5]?+e[5]:null};else{if(!(e=o.exec(s[d])))continue;n={url:e[2],func:e[1]||UNKNOWN_FUNCTION,line:+e[3],column:e[4]?+e[4]:null}}!n.func&&n.line&&(n.func=i(n.url,n.line)),n.line&&(n.context=r(n.url,n.line)),c.push(n)}return c[0]&&c[0].line&&!c[0].column&&u&&(c[0].column=l(u[1],c[0].url,c[0].line)),c.length?{mode:"stack",name:t.name,message:t.message,url:document.location.href,stack:c,useragent:navigator.userAgent}:null}function d(t){for(var e,n=t.stacktrace,o=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,a=n.split("\n"),s=[],l=0,c=a.length;c>l;l+=2)if(e=o.exec(a[l])){var u={line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[],url:e[6]};if(!u.func&&u.line&&(u.func=i(u.url,u.line)),u.line)try{u.context=r(u.url,u.line)}catch(d){}u.context||(u.context=[a[l+1]]),s.push(u)}return s.length?{mode:"stacktrace",name:t.name,message:t.message,url:document.location.href,stack:s,useragent:navigator.userAgent}:null}function h(t){var e=t.message.split("\n");if(e.length<4)return null;var o,l,c,u,d=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,f=[],g=document.getElementsByTagName("script"),m=[];for(l in g)g.hasOwnProperty(l)&&!g[l].src&&m.push(g[l]);for(l=2,c=e.length;c>l;l+=2){var v=null;if(o=d.exec(e[l]))v={url:o[2],func:o[3],line:+o[1]};else if(o=h.exec(e[l])){v={url:o[3],func:o[4]};var y=+o[1],b=m[o[2]-1];if(b&&(u=n(v.url))){u=u.join("\n");var _=u.indexOf(b.innerText);_>=0&&(v.line=y+u.substring(0,_).split("\n").length)}}else if(o=p.exec(e[l])){var x=window.location.href.replace(/#.*$/,""),w=o[1],A=new RegExp(a(e[l+1]));u=s(A,[x]),v={url:x,line:u?u.line:w,func:""}}if(v){v.func||(v.func=i(v.url,v.line));var C=r(v.url,v.line),S=C?C[Math.floor(C.length/2)]:null;v.context=C&&S.replace(/^\s*/,"")===e[l+1].replace(/^\s*/,"")?C:[e[l+1]],f.push(v)}}return f.length?{mode:"multiline",name:t.name,message:e[0],url:document.location.href,stack:f,useragent:navigator.userAgent}:null}function p(t,e,n,o){var a={url:e,line:n};if(a.url&&a.line){t.incomplete=!1,a.func||(a.func=i(a.url,a.line)),a.context||(a.context=r(a.url,a.line));var s=/ '([^']+)' /.exec(o);if(s&&(a.column=l(s[1],a.url,a.line)),t.stack.length>0&&t.stack[0].url===a.url){if(t.stack[0].line===a.line)return!1;if(!t.stack[0].line&&t.stack[0].func===a.func)return t.stack[0].line=a.line,t.stack[0].context=a.context,!1}return t.stack.unshift(a),t.partial=!0,!0}return t.incomplete=!0,!1}function f(t,e){for(var n,r,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],u={},d=!1,h=f.caller;h&&!d;h=h.caller)if(h!==g&&h!==x){if(r={url:null,func:UNKNOWN_FUNCTION,line:null,column:null},h.name?r.func=h.name:(n=a.exec(h.toString()))&&(r.func=n[1]),o=c(h)){r.url=o.url,r.line=o.line,r.func===UNKNOWN_FUNCTION&&(r.func=i(r.url,r.line));var m=/ '([^']+)' /.exec(t.message||t.description);m&&(r.column=l(m[1],o.url,o.line))}u[""+h]?d=!0:u[""+h]=!0,s.push(r)}e&&s.splice(0,e);var v={mode:"callers",name:t.name,message:t.message,url:document.location.href,stack:s,useragent:navigator.userAgent};return p(v,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),v}function g(t,e){var n=null;e=null==e?0:+e;try{if(n=d(t))return n}catch(i){if(v)throw i}try{if(n=u(t))return n}catch(i){if(v)throw i}try{if(n=h(t))return n}catch(i){if(v)throw i}try{if(n=f(t,e+1))return n}catch(i){if(v)throw i}return{mode:"failed"}}function m(t){t=(null==t?0:+t)+1;try{throw new Error}catch(e){return g(e,t+1)}}var v=!1,y={},b=t.remoteFetching,_=t.linesOfContext,x=t.tracekitReport;return g.augmentStackTraceWithInitialElement=p,g.guessFunctionName=i,g.gatherContext=r,g.ofCaller=m,g}function Notifier(t){_topLevelNotifier=_topLevelNotifier||this;var e=window.location.protocol;0!==e.indexOf("http")&&(e="https:");var n=e+"//"+Notifier.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:n,environment:"production",scrubFields:Util.copy(Notifier.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:Notifier.DEFAULT_LOG_LEVEL,reportLevel:Notifier.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:Notifier.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=t,this.logger=function(){if(window.console&&"function"==typeof window.console.log){var t=["Rollbar:"].concat(Array.prototype.slice.call(arguments,0));window.console.log(t)}},t&&(t.hasOwnProperty("shimId")?t.notifier=this:(this.logger=t.logger,this.configure(t.options)))}function _wrapNotifierFn(t,e){return function(){var n=e||this;try{return t.apply(n,arguments)}catch(i){n&&n.logger(i)}}}function _guessErrorClass(t){if(!t)return["Unknown error. There was no error message to display.",""];var e=t.match(ERR_CLASS_REGEXP),n="(unknown)";return e&&(n=e[e.length-1],t=t.replace((e[e.length-2]||"")+n+":",""),t=t.replace(/(^[\s]+|[\s]+$)/g,"")),[n,t]}function _payloadProcessorTimer(t){for(var e;e=window._rollbarPayloadQueue.shift();)_processPayload(e.endpointUrl,e.accessToken,e.payload,e.callback);t||(payloadProcessorTimeout=setTimeout(_payloadProcessorTimer,1e3))}function _processPayload(t,e,n,i){i=i||function(){};var r=(new Date).getTime();r-rateLimitStartTime>=6e4&&(rateLimitStartTime=r,rateLimitPerMinCounter=0);var o=window._globalRollbarOptions.maxItems,a=window._globalRollbarOptions.itemsPerMinute,s=function(){return!n.ignoreRateLimit&&o>=1&&rateLimitCounter>=o},l=function(){return!n.ignoreRateLimit&&a>=1&&rateLimitPerMinCounter>=a};return s()?void i(new Error(o+" max items reached")):l()?void i(new Error(a+" items per minute reached")):(rateLimitCounter++,rateLimitPerMinCounter++,s()&&_topLevelNotifier._log(_topLevelNotifier.options.uncaughtErrorLevel,"maxItems has been hit. Ignoring errors for the remainder of the current page load.",null,{maxItems:o},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void XHR.post(t,e,n,function(t,e){return t?i(t):i(null,e)}))}var setupCustomJSON=function(JSON){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,a,s=gap,l=e[t];switch("function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)a[n]=str(n,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})},UNKNOWN_FUNCTION="?",Util={merge:function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!0;for("object"!=typeof a&&"function"!=typeof a&&(a={});l>s;s++)if(null!==(t=arguments[s]))for(e in t)t.hasOwnProperty(e)&&(n=a[e],i=t[e],a!==i&&(c&&i&&(i.constructor==Object||(r=i.constructor==Array))?(r?(r=!1,o=[]):o=n&&n.constructor==Object?n:{},a[e]=Util.merge(o,i)):void 0!==i&&(a[e]=i)));return a},copy:function(t){var e;return"object"==typeof t&&(t.constructor==Object?e={}:t.constructor==Array&&(e=[])),Util.merge(e,t),e},parseUriOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},parseUri:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new Error("Util.parseUri() received invalid input");for(var e=Util.parseUriOptions,n=e.parser[e.strictMode?"strict":"loose"].exec(t),i={},r=14;r--;)i[e.key[r]]=n[r]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(t,n,r){n&&(i[e.q.name][n]=r)}),i},sanitizeUrl:function(t){if(!t||"string"!=typeof t&&!(t instanceof String))throw new Error("Util.sanitizeUrl() received invalid input");var e=Util.parseUri(t);return""===e.anchor&&(e.source=e.source.replace("#","")),t=e.source.replace("?"+e.query,"")},traverse:function(t,e){var n,i,r,o="object"==typeof t,a=[];if(o)if(t.constructor===Object)for(n in t)t.hasOwnProperty(n)&&a.push(n);else if(t.constructor===Array)for(r=0;r<t.length;++r)a.push(r);for(r=0;r<a.length;++r)n=a[r],i=t[n],o="object"==typeof i,t[n]=o?null===i?e(n,i):i.constructor===Object?Util.traverse(i,e):i.constructor===Array?Util.traverse(i,e):e(n,i):e(n,i);return t},redact:function(t){return t=String(t),new Array(t.length+1).join("*")},uuid4:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return e}},RollbarJSON={};setupCustomJSON(RollbarJSON);var XHR={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var t,e=!1,n=XHR.XMLHttpFactories,i=n.length;for(t=0;i>t;t++)try{e=n[t]();break}catch(r){}return e},post:function(t,e,n,i){if("object"!=typeof n)throw new Error("Expected an object to POST");n=RollbarJSON.stringify(n),i=i||function(){};var r=XHR.createXMLHTTPObject();if(r)try{try{var o=function(){try{o&&4===r.readyState&&(o=void 0,200===r.status?i(null,RollbarJSON.parse(r.responseText)):i("number"==typeof r.status&&r.status>=400&&r.status<600?new Error(r.status.toString()):new Error))}catch(t){var e;e="object"==typeof t&&t.stack?t:new Error(t),i(e)}};r.open("POST",t,!0),r.setRequestHeader&&(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Rollbar-Access-Token",e)),r.onreadystatechange=o,r.send(n)}catch(a){if("undefined"!=typeof XDomainRequest){var s=function(){i(new Error)},l=function(){i(new Error)},c=function(){i(null,RollbarJSON.parse(r.responseText))};r=new XDomainRequest,r.onprogress=function(){},r.ontimeout=s,r.onerror=l,r.onload=c,r.open("POST",t,!0),r.send(n)}}}catch(u){i(u)}}};Notifier.NOTIFIER_VERSION="1.2.2",Notifier.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",Notifier.DEFAULT_SCRUB_FIELDS=["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken"],Notifier.DEFAULT_LOG_LEVEL="debug",Notifier.DEFAULT_REPORT_LEVEL="debug",Notifier.DEFAULT_UNCAUGHT_ERROR_LEVEL="warning",Notifier.DEFAULT_ITEMS_PER_MIN=60,Notifier.DEFAULT_MAX_ITEMS=0,Notifier.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},window._rollbarPayloadQueue=[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:Notifier.DEFAULT_MAX_ITEMS,itemsPerMinute:Notifier.DEFAULT_ITEMS_PER_MIN};var TK=computeStackTraceWrapper({remoteFetching:!1,linesOfContext:3}),_topLevelNotifier;Notifier._generateLogFn=function(t){return _wrapNotifierFn(function(){var e=this._getLogArgs(arguments);return this._log(t||e.level||this.options.logLevel||Notifier.DEFAULT_LOG_LEVEL,e.message,e.err,e.custom,e.callback)})},Notifier.prototype._getLogArgs=function(t){for(var e,n,i,r,o,a,s,l=this.options.logLevel||Notifier.DEFAULT_LOG_LEVEL,c=0;c<t.length;++c)s=t[c],a=typeof s,"string"===a?n=s:"function"===a?o=_wrapNotifierFn(s,this):s&&"object"===a&&("Date"===s.constructor.name?e=s:s instanceof Error||s.prototype===Error.prototype||s.hasOwnProperty("stack")||"undefined"!=typeof DOMException&&s instanceof DOMException?i=s:r=s);return{level:l,message:n,err:i,custom:r,callback:o}},Notifier.prototype._route=function(t){var e=this.options.endpoint,n=/\/$/.test(e),i=/^\//.test(t);return n&&i?t=t.substring(1):n||i||(t="/"+t),e+t},Notifier.prototype._processShimQueue=function(t){for(var e,n,i,r,o,a,s,l={};n=t.shift();)e=n.shim,i=n.method,r=n.args,o=e.parentShim,s=l[e.shimId],s||(o?(a=l[o.shimId],s=new Notifier(a)):s=this,l[e.shimId]=s),s[i]&&"function"==typeof s[i]&&s[i].apply(s,r)},Notifier.prototype._buildPayload=function(t,e,n,i,r){var o=this.options.accessToken,a=this.options.environment,s=Util.copy(this.options.payload),l=Util.uuid4();if(void 0===Notifier.LEVELS[e])throw new Error("Invalid level");if(!n&&!i&&!r)throw new Error("No message, stack info or custom data");var c={environment:a,endpoint:this.options.endpoint,uuid:l,level:e,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(n,i,r),request:{url:window.location.href,query_string:window.location.search,user_ip:"$remote_ip"},client:{runtime_ms:t.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(t.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:Notifier.NOTIFIER_VERSION}};s.body&&delete s.body;var u={access_token:o,data:Util.merge(c,s)};return this._scrub(u.data),u},Notifier.prototype._buildBody=function(t,e,n){var i;return i=e&&"failed"!==e.mode?this._buildPayloadBodyTrace(t,e,n):this._buildPayloadBodyMessage(t,n)},Notifier.prototype._buildPayloadBodyMessage=function(t,e){t||(t=e?RollbarJSON.stringify(e):"");var n={body:t};return e&&(n.extra=Util.copy(e)),{message:n}},Notifier.prototype._buildPayloadBodyTrace=function(t,e,n){var i=_guessErrorClass(e.message),r=e.name||i[0],o=i[1],a={exception:{"class":r,message:o}};if(t&&(a.exception.description=t||"uncaught exception"),e.stack){var s,l,c,u,d,h,p,f;for(a.frames=[],p=0;p<e.stack.length;++p)s=e.stack[p],l={filename:s.url?Util.sanitizeUrl(s.url):"(unknown)",lineno:s.line||null,method:s.func&&"?"!==s.func?s.func:"[anonymous]",colno:s.column},c=u=d=null,h=s.context?s.context.length:0,h&&(f=Math.floor(h/2),u=s.context.slice(0,f),c=s.context[f],d=s.context.slice(f)),c&&(l.code=c),(u||d)&&(l.context={},u&&u.length&&(l.context.pre=u),d&&d.length&&(l.context.post=d)),s.args&&(l.args=s.args),a.frames.push(l);return n&&(a.extra=Util.copy(n)),{trace:a}}return this._buildPayloadBodyMessage(r+": "+o,n)},Notifier.prototype._getBrowserPlugins=function(){if(!this._browserPlugins){var t,e,n=window.navigator.plugins||[],i=n.length,r=[];for(e=0;i>e;++e)t=n[e],r.push({name:t.name,description:t.description});this._browserPlugins=r}return this._browserPlugins},Notifier.prototype._scrub=function(t){function e(t,e,n,i,r,o){return e+Util.redact(o)}function n(t){var n;if("string"==typeof t)for(n=0;n<s.length;++n)t=t.replace(s[n],e);return t}function i(t,e){var n;for(n=0;n<a.length;++n)if(a[n].test(t)){e=Util.redact(e);break}return e}function r(t,e){var r=i(t,e);return r===e?n(r):r}var o=this.options.scrubFields,a=this._getScrubFieldRegexs(o),s=this._getScrubQueryParamRegexs(o);return Util.traverse(t,r),t},Notifier.prototype._getScrubFieldRegexs=function(t){for(var e,n=[],i=0;i<t.length;++i)e="\\[?(%5[bB])?"+t[i]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp(e,"i"));return n},Notifier.prototype._getScrubQueryParamRegexs=function(t){for(var e,n=[],i=0;i<t.length;++i)e="\\[?(%5[bB])?"+t[i]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp("("+e+"=)([^&\\n]+)","igm"));return n},Notifier.prototype._urlIsWhitelisted=function(t){var e,n,i,r,o,a,s,l,c,u;try{if(e=this.options.hostWhiteList,n=t.data.body.trace,!e||0===e.length)return!0;if(!n)return!0;for(s=e.length,o=n.frames.length,c=0;o>c;c++){if(i=n.frames[c],r=i.filename,"string"!=typeof r)return!0;for(u=0;s>u;u++)if(a=e[u],l=new RegExp(a),l.test(r))return!0}}catch(d){return this.configure({hostWhiteList:null}),this.error("Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.",d),!0}return!1},Notifier.prototype._messageIsIgnored=function(t){var e,n,i,r,o,a,s;try{if(o=!1,i=this.options.ignoredMessages,s=t.data.body.trace,!i||0===i.length)return!1;if(!s)return!1;for(e=s.exception.message,r=i.length,n=0;r>n&&(a=new RegExp(i[n],"gi"),!(o=a.test(e)));n++);}catch(l){this.configure({ignoredMessages:null}),this.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return o},Notifier.prototype._enqueuePayload=function(t,e,n,i){var r={callback:i,accessToken:this.options.accessToken,endpointUrl:this._route("item/"),payload:t},o=function(){if(i){var t="This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details.";i(null,{err:0,result:{id:null,uuid:null,message:t}})}};if(this._internalCheckIgnore(e,n,t))return void o();try{if(this.options.checkIgnore&&"function"==typeof this.options.checkIgnore&&this.options.checkIgnore(e,n,t))return void o()}catch(a){this.configure({checkIgnore:null}),this.error("Error while calling custom checkIgnore() function. Removing custom checkIgnore().",a)}if(this._urlIsWhitelisted(t)&&!this._messageIsIgnored(t)){if(this.options.verbose){if(t.data&&t.data.body&&t.data.body.trace){var s=t.data.body.trace,l=s.exception.message;this.logger(l)}this.logger("Sending payload -",r)}"function"==typeof this.options.logFunction&&this.options.logFunction(r);try{"function"==typeof this.options.transform&&this.options.transform(t)}catch(a){this.configure({transform:null}),this.error("Error while calling custom transform() function. Removing custom transform().",a)}this.options.enabled&&window._rollbarPayloadQueue.push(r)}},Notifier.prototype._internalCheckIgnore=function(t,e,n){var i=e[0],r=Notifier.LEVELS[i]||0,o=Notifier.LEVELS[this.options.reportLevel]||0;if(o>r)return!0;var a=this.options?this.options.plugins:{};return a&&a.jquery&&a.jquery.ignoreAjaxErrors&&n.body.message?n.body.messagejquery_ajax_error:!1},Notifier.prototype._log=function(t,e,n,i,r,o,a){var s=null;if(n){if(s=n._tkStackTrace?n._tkStackTrace:TK(n),n===this.lastError)return;this.lastError=n}var l=this._buildPayload(new Date,t,e,s,i);a&&(l.ignoreRateLimit=!0),this._enqueuePayload(l,o?!0:!1,[t,e,n,i],r)},Notifier.prototype.log=Notifier._generateLogFn(),Notifier.prototype.debug=Notifier._generateLogFn("debug"),Notifier.prototype.info=Notifier._generateLogFn("info"),Notifier.prototype.warn=Notifier._generateLogFn("warning"),Notifier.prototype.warning=Notifier._generateLogFn("warning"),Notifier.prototype.error=Notifier._generateLogFn("error"),Notifier.prototype.critical=Notifier._generateLogFn("critical"),Notifier.prototype.uncaughtError=_wrapNotifierFn(function(t,e,n,i,r,o){if(o=o||null,r&&r.stack)return void this._log(this.options.uncaughtErrorLevel,t,r,o,null,!0);if(e&&e.stack)return void this._log(this.options.uncaughtErrorLevel,t,e,o,null,!0);var a={url:e||"",line:n};a.func=TK.guessFunctionName(a.url,a.line),a.context=TK.gatherContext(a.url,a.line);var s={mode:"onerror",message:t||"uncaught exception",url:document.location.href,stack:[a],useragent:navigator.userAgent};r&&(s=r._tkStackTrace||TK(r));var l=this._buildPayload(new Date,this.options.uncaughtErrorLevel,t,s);this._enqueuePayload(l,!0,[this.options.uncaughtErrorLevel,t,e,n,i,r])}),Notifier.prototype.global=_wrapNotifierFn(function(t){t=t||{},Util.merge(window._globalRollbarOptions,t),void 0!==t.maxItems&&(rateLimitCounter=0),void 0!==t.itemsPerMinute&&(rateLimitPerMinCounter=0)}),Notifier.prototype.configure=_wrapNotifierFn(function(t){Util.merge(this.options,t)}),Notifier.prototype.scope=_wrapNotifierFn(function(t){var e=new Notifier(this);return Util.merge(e.options.payload,t),e}),Notifier.prototype.wrap=function(t,e){var n;if(n="function"==typeof e?e:function(){return e||{}},"function"!=typeof t)return t;if(t._isWrap)return t;if(!t._wrapped){t._wrapped=function(){try{return t.apply(this,arguments)}catch(e){throw e.stack||(e._tkStackTrace=TK(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=t.toString(),window._rollbarWrappedError=e,e}},t._wrapped._isWrap=!0;for(var i in t)t.hasOwnProperty(i)&&(t._wrapped[i]=t[i])}return t._wrapped};var ERR_CLASS_REGEXP=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): "),payloadProcessorTimeout;Notifier.processPayloads=function(t){(!payloadProcessorTimeout||t)&&_payloadProcessorTimer(t)};var rateLimitStartTime=(new Date).getTime(),rateLimitCounter=0,rateLimitPerMinCounter=0;if(!window._rollbarInitialized){var config=window._rollbarConfig||{},alias=config.globalAlias||"Rollbar",shim=window[alias],fullRollbar=new Notifier(shim);fullRollbar._processShimQueue(window._rollbarShimQueue||[]),window[alias]=fullRollbar,window._rollbarInitialized=!0,Notifier.processPayloads()}}(window,document);